modules = ["nodejs-20", "web"]
[agent]
expertMode = true
integrations = ["javascript_database:1.0.0"]

[nix]
channel = "stable-25_05"

[workflows]
runButton = "Project"

[[workflows.workflow]]
name = "Project"
mode = "parallel"
author = "agent"

[[workflows.workflow.tasks]]
task = "workflow.run"
args = "Next.js Dev Server"

[[workflows.workflow]]
name = "Next.js Dev Server"
author = "agent"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "npm run dev -- -p 5000 -H 0.0.0.0"
waitForPort = 5000

[workflows.workflow.metadata]
outputType = "webview"

[[ports]]
localPort = 5000
externalPort = 80

[deployment]
deploymentTarget = "autoscale"
run = ["npm", "run", "start", "--", "-p", "5000", "-H", "0.0.0.0"]
build = ["npm", "run", "build"]

[userenv]

[userenv.shared]
MAX_FILE_SIZE = "10485760"
NODE_ENV = "production"
JWT_SECRET = "5d5cc91a5d55401b43f9aa6572ae6f9d18b61be882b0576f53904f2b76e90de5"
NEXTAUTH_SECRET = "7e0b6340a2ef630ec47610b31d19d62254135eb4333834b70431c11f97aab831"
ALLOWED_FILE_TYPES = "image/jpeg,image/png,image/jpg,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document"
ALLOW_DEV_USER_SEED = "true"
NEXTAUTH_URL = "http://localhost:3000"
UPLOAD_DIR = "./uploads"
JWT_EXPIRES_IN = "7d"
